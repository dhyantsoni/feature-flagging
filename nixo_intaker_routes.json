{
  "file_path": "/home/dhyan/nixo-custops/backend/services/AI_Intaker_agent/intaker_routes.py",
  "call_graph": {
    "intaker_routes.get_session": [
      "intaker_orchestrator.get_session_state",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route",
      "intaker_routes.require_feature"
    ],
    "intaker_routes.simulate": [
      "request.get_json",
      "data.get",
      "intaker_routes.jsonify",
      "intaker_service.get_template_by_id",
      "<dynamic>.get",
      "template.get",
      "sufficiency_evaluator.evaluate",
      "result.get",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route",
      "intaker_routes.require_feature"
    ],
    "intaker_routes.get_templates": [
      "user.get",
      "intaker_service.get_templates_by_client",
      "<dynamic>.execute",
      "<dynamic>.eq",
      "<dynamic>.select",
      "<dynamic>.table",
      "intaker_routes.len",
      "logger.debug",
      "intaker_routes.str",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_bp.route",
      "intaker_routes.require_feature"
    ],
    "intaker_routes.create_template": [
      "user.get",
      "request.get_json",
      "data.get",
      "intaker_routes.jsonify",
      "intaker_service.create_template",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.get_template": [
      "intaker_service.get_template_by_id",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.update_template": [
      "request.get_json",
      "intaker_service.update_template",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.delete_template": [
      "intaker_service.delete_template",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.generate_prompt": [
      "request.get_json",
      "<dynamic>.strip",
      "data.get",
      "intaker_routes.jsonify",
      "<dynamic>.create",
      "logger.info",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.get_settings": [
      "user.get",
      "intaker_service.get_client_intaker_settings",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.update_settings": [
      "user.get",
      "request.get_json",
      "data.get",
      "intaker_service.update_client_intaker_settings",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.get_agent_name": [
      "user.get",
      "<dynamic>.execute",
      "<dynamic>.single",
      "<dynamic>.eq",
      "<dynamic>.select",
      "<dynamic>.table",
      "<dynamic>.get",
      "requests.get",
      "user_response.json",
      "user_data.get",
      "user_info_response.json",
      "user_info_data.get",
      "user_profile.get",
      "logger.warning",
      "intaker_routes.str",
      "logger.info",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_bp.route"
    ],
    "intaker_routes.get_intaker_config": [
      "user.get",
      "intaker_service.get_client_intaker_settings",
      "logger.error",
      "intaker_routes.str",
      "intaker_service.get_templates_by_client",
      "<dynamic>.execute",
      "<dynamic>.eq",
      "<dynamic>.select",
      "<dynamic>.table",
      "intaker_routes.len",
      "logger.debug",
      "<dynamic>.single",
      "<dynamic>.get",
      "requests.get",
      "user_response.json",
      "user_data.get",
      "user_info_response.json",
      "user_info_data.get",
      "user_profile.get",
      "logger.info",
      "logger.warning",
      "intaker_service.get_channel_template_mappings",
      "supabase_service.get_client_by_id",
      "client_record.get",
      "public_response.json",
      "public_data.get",
      "channels.append",
      "channel.get",
      "private_response.json",
      "private_data.get",
      "intaker_routes.set",
      "bot_private_response.json",
      "bot_private_data.get",
      "intaker_routes.jsonify",
      "intaker_bp.route",
      "intaker_routes.require_feature"
    ],
    "intaker_routes.suggest_response": [
      "request.get_json",
      "data.get",
      "intaker_routes.jsonify",
      "intaker_service.get_session_by_issue",
      "intaker_orchestrator.suggest_response",
      "result.get",
      "logger.info",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.send_manual_response": [
      "user.get",
      "request.get_json",
      "data.get",
      "<dynamic>.strip",
      "intaker_routes.jsonify",
      "intaker_service.get_session_by_id",
      "session_manager.is_session_active",
      "supabase_service.get_issue_by_id",
      "session.get",
      "intaker_service.get_template_for_channel",
      "template.get",
      "<dynamic>.execute",
      "<dynamic>.single",
      "<dynamic>.eq",
      "<dynamic>.select",
      "<dynamic>.table",
      "<dynamic>.get",
      "requests.get",
      "user_response.json",
      "user_data.get",
      "user_info_response.json",
      "user_info_data.get",
      "user_profile.get",
      "logger.info",
      "logger.warning",
      "intaker_routes.str",
      "logger.error",
      "issue.get",
      "intaker_routes.get_slack_bot_token_by_team",
      "intaker_routes.send_slack_reply",
      "slack_result.get",
      "intaker_routes.add_message_to_issue",
      "session_manager.add_ai_message",
      "<dynamic>.update",
      "session_manager.mark_sufficient",
      "intaker_bp.route"
    ],
    "intaker_routes.get_channel_templates": [
      "user.get",
      "intaker_service.get_channel_template_mappings",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.assign_channel_template": [
      "user.get",
      "request.get_json",
      "data.get",
      "intaker_routes.jsonify",
      "intaker_service.get_template_by_id",
      "template.get",
      "<dynamic>.execute",
      "<dynamic>.eq",
      "<dynamic>.delete",
      "<dynamic>.table",
      "logger.info",
      "logger.warning",
      "intaker_routes.str",
      "intaker_service.assign_template_to_channel",
      "logger.error",
      "intaker_bp.route"
    ],
    "intaker_routes.remove_channel_template": [
      "user.get",
      "<dynamic>.execute",
      "<dynamic>.eq",
      "<dynamic>.delete",
      "<dynamic>.table",
      "logger.info",
      "logger.warning",
      "intaker_routes.str",
      "intaker_service.remove_channel_template",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_bp.route"
    ],
    "intaker_routes.calculate_template_delta": [
      "base_template.get",
      "modified_template.get"
    ],
    "intaker_routes.create_or_update_channel_override": [
      "user.get",
      "data.get",
      "intaker_routes.jsonify",
      "<dynamic>.execute",
      "<dynamic>.single",
      "<dynamic>.eq",
      "<dynamic>.select",
      "<dynamic>.table",
      "intaker_routes.calculate_template_delta",
      "intaker_routes.len",
      "<dynamic>.update",
      "logger.info",
      "<dynamic>.insert",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.get_all_channel_overrides": [
      "user.get",
      "<dynamic>.execute",
      "<dynamic>.eq",
      "<dynamic>.select",
      "<dynamic>.table",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.get_channel_override": [
      "user.get",
      "<dynamic>.execute",
      "<dynamic>.single",
      "<dynamic>.eq",
      "<dynamic>.select",
      "<dynamic>.table",
      "intaker_routes.jsonify",
      "<dynamic>.get",
      "intaker_routes.len",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.delete_channel_override": [
      "user.get",
      "<dynamic>.execute",
      "<dynamic>.eq",
      "<dynamic>.delete",
      "<dynamic>.table",
      "logger.info",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ],
    "intaker_routes.delete_all_overrides_for_template": [
      "user.get",
      "<dynamic>.execute",
      "<dynamic>.eq",
      "<dynamic>.delete",
      "<dynamic>.table",
      "logger.info",
      "intaker_routes.jsonify",
      "logger.error",
      "intaker_routes.str",
      "intaker_bp.route"
    ]
  },
  "functions": [
    "intaker_routes.get_template",
    "intaker_routes.update_template",
    "intaker_routes.update_settings",
    "intaker_routes.delete_all_overrides_for_template",
    "intaker_routes.suggest_response",
    "intaker_routes.get_intaker_config",
    "intaker_routes.get_session",
    "intaker_routes.delete_channel_override",
    "intaker_routes.get_templates",
    "intaker_routes.remove_channel_template",
    "intaker_routes.calculate_template_delta",
    "intaker_routes.send_manual_response",
    "intaker_routes.get_agent_name",
    "intaker_routes.delete_template",
    "intaker_routes.get_channel_templates",
    "intaker_routes.assign_channel_template",
    "intaker_routes.get_channel_override",
    "intaker_routes.create_template",
    "intaker_routes.simulate",
    "intaker_routes.create_or_update_channel_override",
    "intaker_routes.get_settings",
    "intaker_routes.generate_prompt",
    "intaker_routes.get_all_channel_overrides"
  ],
  "feature_flags": {
    "intaker_routes.get_session": "intaker_agent",
    "intaker_routes.simulate": "intaker_agent",
    "intaker_routes.get_templates": "intaker_agent",
    "intaker_routes.get_intaker_config": "intaker_agent"
  },
  "helper_functions": {
    "intaker_routes.require_feature": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_bp.route": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_routes.jsonify": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "logger.error": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_routes.str": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_orchestrator.get_session_state": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "request.get_json": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "result.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "data.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_service.get_template_by_id": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "template.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "<dynamic>.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "sufficiency_evaluator.evaluate": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_service.get_templates_by_client": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "user.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "<dynamic>.execute": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "<dynamic>.select": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_routes.len": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "<dynamic>.table": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "logger.debug": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "<dynamic>.eq": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "supabase_service.get_client_by_id": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "bot_private_response.json": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_service.get_client_intaker_settings": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "logger.info": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "public_response.json": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "requests.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "channels.append": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "user_data.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_routes.set": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "channel.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "user_response.json": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "user_info_data.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "bot_private_data.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "intaker_service.get_channel_template_mappings": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "user_profile.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "client_record.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "private_response.json": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "public_data.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "user_info_response.json": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "<dynamic>.single": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "logger.warning": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    },
    "private_data.get": {
      "used_by_features": [
        "intaker_agent"
      ],
      "is_shared": false,
      "is_leaf": true
    }
  },
  "shared_helpers": [],
  "function_complexity": {
    "intaker_routes.get_session": 3,
    "intaker_routes.simulate": 4,
    "intaker_routes.get_templates": 4,
    "intaker_routes.create_template": 4,
    "intaker_routes.get_template": 3,
    "intaker_routes.update_template": 3,
    "intaker_routes.delete_template": 3,
    "intaker_routes.generate_prompt": 4,
    "intaker_routes.get_settings": 2,
    "intaker_routes.update_settings": 2,
    "intaker_routes.get_agent_name": 11,
    "intaker_routes.get_intaker_config": 29,
    "intaker_routes.suggest_response": 6,
    "intaker_routes.send_manual_response": 33,
    "intaker_routes.get_channel_templates": 2,
    "intaker_routes.assign_channel_template": 9,
    "intaker_routes.remove_channel_template": 4,
    "intaker_routes.calculate_template_delta": 5,
    "intaker_routes.create_or_update_channel_override": 9,
    "intaker_routes.get_all_channel_overrides": 3,
    "intaker_routes.get_channel_override": 5,
    "intaker_routes.delete_channel_override": 2,
    "intaker_routes.delete_all_overrides_for_template": 2
  },
  "function_lines": {
    "intaker_routes.get_session": 22,
    "intaker_routes.simulate": 44,
    "intaker_routes.get_templates": 102,
    "intaker_routes.create_template": 141,
    "intaker_routes.get_template": 181,
    "intaker_routes.update_template": 198,
    "intaker_routes.delete_template": 216,
    "intaker_routes.generate_prompt": 233,
    "intaker_routes.get_settings": 333,
    "intaker_routes.update_settings": 349,
    "intaker_routes.get_agent_name": 376,
    "intaker_routes.get_intaker_config": 440,
    "intaker_routes.suggest_response": 681,
    "intaker_routes.send_manual_response": 733,
    "intaker_routes.get_channel_templates": 951,
    "intaker_routes.assign_channel_template": 971,
    "intaker_routes.remove_channel_template": 1030,
    "intaker_routes.calculate_template_delta": 1065,
    "intaker_routes.create_or_update_channel_override": 1096,
    "intaker_routes.get_all_channel_overrides": 1163,
    "intaker_routes.get_channel_override": 1185,
    "intaker_routes.delete_channel_override": 1218,
    "intaker_routes.delete_all_overrides_for_template": 1241
  },
  "feature_impact": {
    "intaker_agent": {
      "intaker_routes.get_session": {
        "feature_flag": "intaker_agent",
        "can_safely_disable": [
          "intaker_bp.route",
          "intaker_orchestrator.get_session_state",
          "intaker_routes.jsonify",
          "intaker_routes.require_feature",
          "intaker_routes.str",
          "logger.error"
        ],
        "must_keep_active": [],
        "must_keep_reasons": {},
        "upstream_dependencies": [],
        "direct_callers": [],
        "requires_fallback_in": [],
        "impact_summary": {
          "total_downstream": 6,
          "can_disable_count": 6,
          "must_keep_count": 0,
          "functions_need_fallback": 0
        }
      },
      "intaker_routes.simulate": {
        "feature_flag": "intaker_agent",
        "can_safely_disable": [
          "<dynamic>.get",
          "data.get",
          "intaker_bp.route",
          "intaker_routes.jsonify",
          "intaker_routes.require_feature",
          "intaker_routes.str",
          "intaker_service.get_template_by_id",
          "logger.error",
          "request.get_json",
          "result.get",
          "sufficiency_evaluator.evaluate",
          "template.get"
        ],
        "must_keep_active": [],
        "must_keep_reasons": {},
        "upstream_dependencies": [],
        "direct_callers": [],
        "requires_fallback_in": [],
        "impact_summary": {
          "total_downstream": 12,
          "can_disable_count": 12,
          "must_keep_count": 0,
          "functions_need_fallback": 0
        }
      },
      "intaker_routes.get_templates": {
        "feature_flag": "intaker_agent",
        "can_safely_disable": [
          "<dynamic>.eq",
          "<dynamic>.execute",
          "<dynamic>.select",
          "<dynamic>.table",
          "intaker_bp.route",
          "intaker_routes.jsonify",
          "intaker_routes.len",
          "intaker_routes.require_feature",
          "intaker_routes.str",
          "intaker_service.get_templates_by_client",
          "logger.debug",
          "logger.error",
          "user.get"
        ],
        "must_keep_active": [],
        "must_keep_reasons": {},
        "upstream_dependencies": [],
        "direct_callers": [],
        "requires_fallback_in": [],
        "impact_summary": {
          "total_downstream": 13,
          "can_disable_count": 13,
          "must_keep_count": 0,
          "functions_need_fallback": 0
        }
      },
      "intaker_routes.get_intaker_config": {
        "feature_flag": "intaker_agent",
        "can_safely_disable": [
          "<dynamic>.eq",
          "<dynamic>.execute",
          "<dynamic>.get",
          "<dynamic>.select",
          "<dynamic>.single",
          "<dynamic>.table",
          "bot_private_data.get",
          "bot_private_response.json",
          "channel.get",
          "channels.append",
          "client_record.get",
          "intaker_bp.route",
          "intaker_routes.jsonify",
          "intaker_routes.len",
          "intaker_routes.require_feature",
          "intaker_routes.set",
          "intaker_routes.str",
          "intaker_service.get_channel_template_mappings",
          "intaker_service.get_client_intaker_settings",
          "intaker_service.get_templates_by_client",
          "logger.debug",
          "logger.error",
          "logger.info",
          "logger.warning",
          "private_data.get",
          "private_response.json",
          "public_data.get",
          "public_response.json",
          "requests.get",
          "supabase_service.get_client_by_id",
          "user.get",
          "user_data.get",
          "user_info_data.get",
          "user_info_response.json",
          "user_profile.get",
          "user_response.json"
        ],
        "must_keep_active": [],
        "must_keep_reasons": {},
        "upstream_dependencies": [],
        "direct_callers": [],
        "requires_fallback_in": [],
        "impact_summary": {
          "total_downstream": 36,
          "can_disable_count": 36,
          "must_keep_count": 0,
          "functions_need_fallback": 0
        }
      }
    }
  },
  "statistics": {
    "total_functions": 23,
    "total_calls": 272,
    "feature_flagged_functions": 4,
    "helper_functions": 43,
    "shared_helpers": 0,
    "features": 1
  }
}